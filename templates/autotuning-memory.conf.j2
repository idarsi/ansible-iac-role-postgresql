{% if pg_autotuning_memory|lower != 'off' %}
shared_buffers = {{ (((ansible_memtotal_mb / 1024.0) | round | int) * 0.25) | int * 1024 }}MB
# Based on max_connections = {{ pg_max_connections }}
work_mem = {{ ((((ansible_memtotal_mb / 1024.0) | round | int) * 0.25) / (pg_max_connections|float) * 1024) | round | int }}MB
maintenance_work_mem = {{ ((ansible_memtotal_mb / 1024.0) | round | int) * 64 }}MB
effective_cache_size = {{ (((ansible_memtotal_mb / 1024.0) | round | int) * 0.50) | int * 1024 }}MB
{% endif %}
