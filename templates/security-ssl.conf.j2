{% if pg_security_ssl|lower != 'off' %}
ssl = 'on'
ssl_cert_file = '{{ pg_certificate_public_key_fullpath }}'
ssl_key_file = '{{ pg_certificate_private_key_fullpath }}'
ssl_min_protocol_version = '{{ pg_certificate_ssl_min_protocol_version }}'
{% if pg_certificate_ssl_min_protocol_version|lower == 'tlsv1.2' %}
ssl_prefer_server_ciphers = 'off'
ssl_ciphers = 'ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384'
{% endif %}
{% endif %}